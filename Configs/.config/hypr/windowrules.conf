# █▀▀ ▀▄▀ █▀▀ █▀▀
# ██▄ █░█ ██▄ █▄▄


# # sets x11 dpi
exec-once = echo "Xft.dpi: 140" | xrdb -merge
exec-once=xprop -root -f _XWAYLAND_GLOBAL_OUTPUT_SCALE 32c -set _XWAYLAND_GLOBAL_OUTPUT_SCALE 1


exec-once=systemctl --user unmask xdg-desktop-portal-hyprland
exec-once=systemctl --user mask xdg-desktop-portal-gnome


#clipboard
exec-once = wl-clip-persist --clipboard regular &
exec-once = wl-paste -t text --watch clipman store --no-persist

#anther tool
exec-once=cp /home/wrq/.config/fcitx/hyprland_profile  /home/wrq/.config/fcitx/profile -f
exec-once=wlsunset -T 3501 -t 3500
#exec-once=fcitx5 --replace -d
exec-once=fcitx
exec-once=hyprpaper &
#exec-once=~/.config/hypr/scripts/wall ~/.config/hypr/wallpapers/1.jpg &
#exec-once=dunst -config ~/.config/dunst/hypr_dunstrc &
#exec-once=mako &
exec-once=blueman-applet &
exec-once=~/.config/hypr/scripts/launch_waybar &
exec-once=nm-applet &
exec-once=/usr/local/libexec/polkit-gnome-authentication-agent-1 &
exec-once=dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP &

#auto mount disk
exec-once=[ -e /dev/sda1 ] && udisksctl mount -b /dev/sda4

exec-once=python3 /home/wrq/tool/sign.py &

#exec-once = ~/.config/scripts/autolock &
#exec-once = ~/.config/scripts/offmonitor &
exec-once = waybar &
exec = ~/.config/eww/scripts/init &



# █▀▄▀█ █▀█ █▄░█ █ ▀█▀ █▀█ █▀█
# █░▀░█ █▄█ █░▀█ █ ░█░ █▄█ █▀▄

monitor=,1920x1080,auto,1

#monitor=,preferred,auto,auto
#monitor=DP-3,1920x1080@75,0x0,1
#monitor=DP-2,1920x1080@75,1920x0,1
#workspace=DP-3,1
#workspace=DP-2,2
#workspace=DP-2,3
#workspace=DP-2,4
#workspace=DP-2,5
#workspace=DP-2,6

# █▀▀ █▄░█ █░█   █░█ ▄▀█ █▀█
# ██▄ █░▀█ ▀▄▀   ▀▄▀ █▀█ █▀▄

#env = XCURSOR_SIZE,15
#env = WLR_NO_HARDWARE_CURSORS,1
#env = QT_QPA_PLATFORM,wayland


# █ █▄░█ █▀█ █░█ ▀█▀
# █ █░▀█ █▀▀ █▄█ ░█░

input {
    kb_layout = 
    follow_mouse = 1 
    sensitivity = -0.5 # -1.0 - 1.0, 0 means no modification.
    #force_no_accel = 1
    numlock_by_default=true

}

# █▀▀ █▀▀ █▄░█ █▀▀ █▀█ ▄▀█ █░░
# █▄█ ██▄ █░▀█ ██▄ █▀▄ █▀█ █▄▄

general {
    gaps_in = 5
    gaps_out = 15
    border_size = 5
    col.active_border = 0xff7d61a5
    col.inactive_border = rgb(101b1f) rgb(292137) 270deg
    col.group_border_active = rgb(f5c2e7)
    no_border_on_floating = false
    layout = master
    no_cursor_warps = true
}

# █▀▄ █▀▀ █▀▀ █▀█ █▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█
# █▄▀ ██▄ █▄▄ █▄█ █▀▄ █▀█ ░█░ █ █▄█ █░▀█

decoration {
#    rounding = 15
#    multisample_edges = true
#    blur {
#        enabled = yes
#        size = 6
#        passes = 3
#        new_optimizations = on
#        ignore_opacity = true
#        xray = true
#        #blurls = waybar
#    }
#    drop_shadow = yes
#    shadow_ignore_window = true
#    shadow_range = 50
#    shadow_offset = 0 8
#    shadow_render_power = 3
#    col.shadow = rgba(00000099)

    drop_shadow = false
    shadow_range=100
    shadow_render_power=5
    col.shadow= 0x33000000
    col.shadow_inactive=0x22000000
    rounding=15
    blur {
      enabled = true
      new_optimizations = true
      size=6 # minimum 1
      passes=3 # minimum 1, more passes = more resource intensive.
    }
}

# ▄▀█ █▄░█ █ █▀▄▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█
# █▀█ █░▀█ █ █░▀░█ █▀█ ░█░ █ █▄█ █░▀█

animations {
#    enabled = yes
#    bezier = wind, 0.05, 0.9, 0.1, 1.05
#    bezier = winIn, 0.1, 1.1, 0.1, 1.1
#    bezier = winOut, 0.3, -0.3, 0, 1
#    bezier = liner, 1, 1, 1, 1
#    animation = windows, 1, 6, wind, slide
#    animation = windowsIn, 1, 6, winIn, slide
#    animation = windowsOut, 1, 5, winOut, slide
#    animation = windowsMove, 1, 5, wind, slide
#    animation = border, 1, 1, liner
#    animation = borderangle, 1, 30, liner, loop
#    animation = fade, 1, 10, default
#    animation = workspaces, 1, 5, wind

    enabled=1
    bezier=pace,0.46, 1, 0.29, 0.99
    bezier=overshot,0.13,0.99,0.29,1.1
    animation=border,1,10,default
    animation=fade,1,10,default
    #下面的第三个参数是调动画速度的
    animation=windowsIn,1,7,overshot,popin
    animation=windowsOut, 1, 4, default,  slide
    animation=windowsMove, 1, 4, pace,  slide
    animation=workspaces,1,6,overshot,slidevert

}

# █░░ ▄▀█ █▄█ █▀█ █░█ ▀█▀ █▀
# █▄▄ █▀█ ░█░ █▄█ █▄█ ░█░ ▄█

dwindle {
    no_gaps_when_only = false
    pseudotile = true 
    preserve_split = true
}

misc {
#    suppress_portal_warnings = true
}


master {
  new_on_top = true
  new_is_master = true
}

# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█


windowrulev2 = opacity 1.0 0.80,class:^(gnome-terminal-server)$
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$
windowrulev2 = noblur,class:^(fcitx)$

windowrule = noshadow, floating:0

windowrule = float, ^(nemo)$
windowrule = size 65% 65%, ^(nemo)$
windowrule = center, ^(nemo)$

windowrule = float, ^(discord)$
windowrule = center, ^(discord)$

windowrule = float, ^(mpv)$
windowrule = center, ^(mpv)$
windowrule = size 65% 75%, ^(mpv)$

windowrule = float, ^(VirtualBox Manager)$
windowrule = size 65% 65%, ^(VirtualBox Manager)$
windowrule = center, ^(VirtualBox Manager)$

windowrule = float, ^(VirtualBox Machine)$
windowrule = size 65% 75%, ^(VirtualBox Machine)$

windowrule = float, ^(xed)$
windowrule = size 65% 65%, ^(xed)$
windowrule = center, ^(xed)$

windowrule = float, ^(pavucontrol)$
windowrule = size 45% 65%, ^(pavucontrol)$
windowrule = center, ^(pavucontrol)$

windowrule = float, ^(xviewer)$
windowrule = size 65% 65%, ^(xviewer)$
windowrule = center, ^(xviewer)$

windowrule = float, ^(nwg-look)$
windowrule = size 65% 65%, ^(nwg-look)$
windowrule = center, ^(nwg-look)$

windowrule = float, ^(Vmware)$

windowrulev2 = float,title:^图片查看器$
windowrulev2 = float,title:^群公告-
windowrulev2 = float,title:的聊天记录$
windowrulev2 = float,title:输入法配置$
windowrulev2 = float,title:^位置$

windowrulev2 = float,class:^(blueman-manager)$
windowrulev2 = size 600 650,class:^(blueman-manager)$
windowrule = move 700 200,title:^蓝牙设备

windowrulev2 = float,title:NCM$
windowrulev2 = float,class:^(electron-netease-cloud-music)$
windowrule = move 250 100,title:NCM$
windowrulev2 = size 75% 80% ,title:NCM$
windowrulev2 = animation slide,title:NCM$

windowrulev2 = float,title:阿里云盘小白羊$
windowrulev2 = size 75% 80% ,title:阿里云盘小白羊$
windowrulev2 =  animation slide,title:阿里云盘小白羊$

windowrulev2 = float,title:^Clash
windowrulev2 = size 75% 80% ,title:^Clash
windowrule = move 250 100,title:^Clash
windowrulev2 =  animation slide,title:^Clash

windowrulev2 = float,title:百度网盘$
windowrulev2 =  animation slide,title:百度网盘$
windowrulev2 = size 75% 80% ,title:百度网盘$
windowrule = move 250 100,title:百度网盘$


windowrulev2 = float,title:另存为$
windowrulev2 = size 75% 80% ,title:另存为$
windowrulev2 =  animation slide,title:另存为$
windowrule = move 250 100,title:另存为$

#layerrule = blur,waybar
#layerrule = blur,wofi

# █▄▀ █▀▀ █▄█ █▄▄ █ █▄░█ █▀▄
# █░█ ██▄ ░█░ █▄█ █ █░▀█ █▄▀

#terminal
bind=ALT,RETURN,exec,gnome-terminal

#screen shot 
bind=CTRL_ALT,a,exec,grim -g "$(slurp)" - | swappy -f -

#lockscreen
bind=SUPER,L,exec,swaylock -f -c 000000

# app
bind=SUPER,RETURN,exec,google-chrome
bind=ALT,E,exec,nautilus
bind=CTRL,space,exec,rofi -theme ~/.config/rofi/themes/fancy2.rasi -modi blocks -show blocks -blocks-wrap ~/tool/movie.py
bind=SUPER,V,exec,clipman pick -t rofi 
bind=ALT,space,exec,wofi --show drun -o DP-3
#bind=ALT,space,exec,tofi-drun --drun-launch=true
bind=SUPER,space,exec,rofi -theme ~/.config/rofi/themes/fancy2.rasi -modi blocks -show blocks -blocks-wrap ~/.config/rofi/search.py 
bind=SUPER,C,exec,rofi -theme  ~/.config/rofi/themes/fancy2.rasi -modi blocks -show blocks -blocks-wrap ~/.config/rofi/history.py 
bind=SUPER,X,exec,rofi -theme  ~/.config/rofi/themes/fancy2.rasi -modi blocks -show blocks -blocks-wrap ~/.config/rofi/recentfile.py

#windows manager
bind=ALT,Q,killactive,
bind=SUPER,M,exit,
bind=SUPER,S,togglefloating,
bind=ALT,A,fullscreen
bind=,mouse:274,fullscreen
bind=ALT,S,layoutmsg,swapwithmaster

#workspace manager
bindm=SUPER,mouse:273,movewindow
bindm=SUPER,mouse:272,resizewindow

#move window focus
bind=ALT,left,movefocus,l
bind=ALT,right,movefocus,r
bind=ALT,up,movefocus,u
bind=ALT,down,movefocus,d

#move workspace
bind=CTRL,code:87,workspace,1
bind=CTRL,code:88,workspace,2
bind=CTRL,code:89,workspace,3
bind=CTRL,code:83,workspace,4
bind=CTRL,code:84,workspace,5
bind=CTRL,code:85,workspace,6
bind=CTRL,down,workspace,e+1
bind=CTRL,up,workspace,e-1
bind=SUPER,mouse_down,workspace,e-1
bind=SUPER,mouse_up,workspace,e+1


#move window to worksapce
bind=ALT,code:87,movetoworkspace,1
bind=ALT,code:88,movetoworkspace,2
bind=ALT,code:89,movetoworkspace,3
bind=ALT,code:83,movetoworkspace,4
bind=ALT,code:84,movetoworkspace,5
bind=ALT,code:85,movetoworkspace,6




#backlight
bind = , XF86MonBrightnessUp, exec,sudo  brightnessctl set +5%
bind = , XF86MonBrightnessDown, exec,sudo  brightnessctl set 5%-

bind =CTRL,code:60,exec,~/.bscripts/brightness.sh up
bind =CTRL,code:59,exec,~/.bscripts/brightness.sh down

#sound
bind = ,code:122,exec,amixer set Master 1%-
bind = ,code:123,exec,amixer set Master 1%+

bind =ALT,code:60,exec,~/.bscripts/volume.sh up
bind =ALT,code:59,exec,~/.bscripts/volume.sh down
#system sleep
bind = SUPER,b,exec,sudo systemctl suspend

#vpn
bind = CTRL,RETURN,exec,bash ~/tool/clash.sh 


bind = SUPER,p,exec,bash ~/tool/monitor.sh
bind = SUPER,w,exec,bash ~/tool/waydroid.sh
bind = SUPER,h,exec,bash ~/.config/hypr/scripts/hide_waybar.sh
bind = CTRL_SUPER,code:87,exec,nohup bash ~/wmtheme/switch.sh mytheme > /dev/null 2>&1

